<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>

    body { background-color:black;}

    div.purpleHorizon {
      border: 4px solid #045196;
      background-color: #555555;
      width: 350px;
      text-align: center;
      border-collapse: collapse;
    }
    .divTable.purpleHorizon .divTableCell, .divTable.purpleHorizon .divTableHead {
      border: 1px solid #555555;
      padding: 5px 2px;
    }
    .divTable.purpleHorizon .divTableBody .divTableCell {
      font-size: 16px;
      font-weight: bold;
      color: #FFFFFF;
    }
    .divTable.purpleHorizon .divTableRow:nth-child(even) {
      background: #3185FC;
    }
    .divTable.purpleHorizon .divTableHeading {
      background: #045196;
      border-bottom: 4px solid #045196;
    }
    .divTable.purpleHorizon .divTableHeading .divTableHead {
      font-size: 19px;
      font-weight: bold;
      color: #FFFFFF;
      text-align: left;
      border-left: 2px solid #045196;
    }
    .divTable.purpleHorizon .divTableHeading .divTableHead:first-child {
      border-left: none;
    }

    .purpleHorizon .tableFootStyle {
      font-size: 16px;
      font-weight: bold;
      color: #FFFFFF;
      background: #3185FC;
      background: -moz-linear-gradient(top, #64a3fd 0%, #4591fc 66%, #3185FC 100%);
      background: -webkit-linear-gradient(top, #64a3fd 0%, #4591fc 66%, #3185FC 100%);
      background: linear-gradient(to bottom, #64a3fd 0%, #4591fc 66%, #3185FC 100%);
      border-top: 1px solid #045196;
    }
    .purpleHorizon .tableFootStyle {
      font-size: 16px;
    }
    .purpleHorizon .tableFootStyle .links {
         text-align: right;
    }
    .purpleHorizon .tableFootStyle .links a{
      display: inline-block;
      background: #045196;
      color: #FFFFFF;
      padding: 2px 8px;
      border-radius: 5px;
    }
    .purpleHorizon.outerTableFooter {
      border-top: none;
    }
    .purpleHorizon.outerTableFooter .tableFootStyle {
      padding: 3px 5px; 
    }
    /* DivTable.com */
    .divTable{ display: table; }
    .divTableRow { display: table-row; }
    .divTableHeading { display: table-header-group;}
    .divTableCell, .divTableHead { display: table-cell;}
    .divTableHeading { display: table-header-group;}
    .divTableFoot { display: table-footer-group;}
    .divTableBody { display: table-row-group;}
</style>
</head>
<body>

<div class="divTable purpleHorizon" id="turret_report">

</div>
    
<br><br>
    
<div class="divTable purpleHorizon" id="target_report">
    
</div>
    
<br><br>
    
<div class="divTable purpleHorizon" id="magnetize_report">
    
</div>
    
<div class="divTable purpleHorizon" id="combat_report">
    <div class="divTableHeading">
        <div class="divTableHead">actions1</div>
        <div class="divTableHead">actions2</div>
        <div class="divTableHead">actions3</div>
    </div>
    
    <div class="divTableBody">
        <div class="divTableRow">
            <div class="divTableCell" id="r1c1">none</div>
            <div class="divTableCell" id="r1c2">none</div>
            <div class="divTableCell" id="r1c3"></div>
        </div>
         <div class="divTableRow">
            <div class="divTableCell" id="r2c1">none</div>
            <div class="divTableCell" id="r2c2">none</div>
            <div class="divTableCell" id="r2c3"></div>
        </div>
        <div class="divTableRow">
            <div class="divTableCell" id="r3c1">none</div>
            <div class="divTableCell" id="r3c2">none</div>
            <div class="divTableCell" id="r3c3"></div>
        </div>
        <div class="divTableRow">
            <div class="divTableCell" id="r4c1">none</div>
            <div class="divTableCell" id="r4c2">none</div>
            <div class="divTableCell" id="r4c3"></div>
        </div>
        <div class="divTableRow">
            <div class="divTableCell" id="r5c1">none</div>
            <div class="divTableCell" id="r5c2">none</div>
            <div class="divTableCell" id="r5c3"></div>
        </div>
        <div class="divTableRow">
            <div class="divTableCell" id="r6c1">none</div>
            <div class="divTableCell" id="r6c2">none</div>
            <div class="divTableCell" id="r6c3"></div>
        </div>
         <div class="divTableRow">
            <div class="divTableCell" id="r7c1">none</div>
            <div class="divTableCell" id="r7c2">none</div>
            <div class="divTableCell" id="r7c3"></div>
        </div>
        <div class="divTableRow">
            <div class="divTableCell" id="r8c1">none</div>
            <div class="divTableCell" id="r8c2">none</div>
            <div class="divTableCell" id="r8c3"></div>
        </div>
        <div class="divTableRow">
            <div class="divTableCell" id="r9c1">none</div>
            <div class="divTableCell" id="r9c2">none</div>
            <div class="divTableCell" id="r9c3"></div>
        </div>
        <div class="divTableRow">
            <div class="divTableCell" id="r10c1">none</div>
            <div class="divTableCell" id="r10c2">none</div>
            <div class="divTableCell" id="r10c3"></div>
        </div>        
    </div>
</div>

<script>
        window.addEventListener('message', event => {
            //IMPORTANT: check the origin of the data! 
            if (!event.origin.startsWith('https://play.starmourn.com')) {
                return;
            }
            
            if (event.data.messageType == "initialize") start();
            
            if (event.data.messageType == "combatEntry") writeEntry(event.data.combatEntry)
            
            window.document.getElementById(event.data.tableId).innerHTML = event.data.report    


        });
    
        start = function(){
            rowNum = 1
            counter = 1
            testScroll()
        }
    
        testScroll = function(){
            
            writeEntry("test" + counter)
            counter += 1
            setTimeout(function(){ testScroll() }, 1000);
            
        }
        
        writeEntry = function(value) {
            if (rowNum > 10) {
                shiftThenWrite(value);
                return;
            }
            
            window.document.getElementById("r" + rowNum + "c3").innerHTML = value    
            
            rowNum += 1
        }
        
        
        shiftThenWrite = function(value){
            var i;
            for (i = 1; i <= 10; i++) {
                window.document.getElementById("r" + i + "c1").innerHTML = window.document.getElementById("r" + i + "c2").innerHTML
                window.document.getElementById("r" + i + "c2").innerHTML = window.document.getElementById("r" + i + "c3").innerHTML
                window.document.getElementById("r" + i + "c3").innerHTML = ""
            }
            
            rowNum = 1
            writeEntry(value)   
        }

</script>

</body>
</html>